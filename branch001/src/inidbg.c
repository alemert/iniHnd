/******************************************************************************/
/* ini handler debug features                                                */
/******************************************************************************/

/******************************************************************************/
/*   I N C L U D E S                                                          */
/******************************************************************************/

// ---------------------------------------------------------
// system
// ---------------------------------------------------------

// ---------------------------------------------------------
// own 
// ---------------------------------------------------------
#include <initypes.h>
#include <inihnd.h>

#include <msgcat/lgstd.h>
#include <ctl.h>

/******************************************************************************/
/*   G L O B A L S                                                            */
/******************************************************************************/

/******************************************************************************/
/*   D E F I N E S                                                            */
/******************************************************************************/
#define OFFSET "  "

/******************************************************************************/
/*   M A C R O S                                                              */
/******************************************************************************/

/******************************************************************************/
/*   P R O T O T Y P E S                                                      */
/******************************************************************************/
void printNode( tIniNode *node, char* offset ) ;
void printVal( tIniVal *val, char* offset )  ;

/******************************************************************************/
/*                                                                            */
/*   F U N C T I O N S                                                        */
/*                                                                            */
/******************************************************************************/

/******************************************************************************/
/*  print tree                                                                */
/******************************************************************************/
void printTree( tIniNode *node, char* offset ) 
{

  if( node == NULL ) 
  {
    printf( "%snull\n", offset ) ; 
    return ;
  }

  printNode( node, offset ) ;

  if( node->childNode != NULL) printTree( node->childNode, OFFSET offset ) ;

  if( node->nextNode != NULL ) printTree( node->nextNode, offset ) ;
}

/******************************************************************************/
/* print node                                                                 */
/******************************************************************************/
void printNode( tIniNode *node, char* offset ) 
{

  printf( "%s<%s>\n", offset, node->tag ) ;

  if( node->value != NULL ) printVal( node->value, offset ) ;

  printf( "%s<\\%s>\n\n", offset, node->tag ) ;
}

/******************************************************************************/
/* print values                                                               */
/******************************************************************************/
void printVal( tIniVal *val, char* offset ) 
{
  switch( val->type )
  {
    case STRING :
    {
      printf( OFFSET"%s %s = %s\n", offset, val->key, val->value.strVal ) ;
      break ;
    }
    case INTIGER :
    {
      printf( OFFSET"%s %s = %d\n", offset, val->key, val->value.intVal ) ;
      break ;
    }
  }
  if( val->nextVal != NULL ) printVal( val->nextVal, offset ) ;
}
